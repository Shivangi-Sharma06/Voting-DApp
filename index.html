<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereum Voting DApp</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
</head>

<body>

    <button onclick="connectWallet()">Connect Wallet</button>
    <select id="accountSelect" style="display:none;" onchange="selectAccount(event)">
        <!-- Accounts will be added dynamically -->
    </select>
    <p id="walletAddress">Not Connected</p>

    <script>
        let availableAccounts = [];
        let selectedAccount = null;

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    availableAccounts = await window.ethereum.request({ method: "eth_requestAccounts" });

                    if (availableAccounts.length > 0) {
                        populateAccountDropdown(availableAccounts);
                    }
                } catch (error) {
                    console.error("Error connecting to MetaMask:", error);
                }
            } else {
                alert("MetaMask is not installed. Please install it to use this feature.");
            }
        }

        function populateAccountDropdown(accounts) {
            const accountSelect = document.getElementById("accountSelect");
            accountSelect.innerHTML = ""; // Clear previous options
            accounts.forEach(account => {
                let option = document.createElement("option");
                option.value = account;
                option.textContent = account;
                accountSelect.appendChild(option);
            });

            accountSelect.style.display = "block"; // Show dropdown
        }

        function selectAccount(event) {
            selectedAccount = event.target.value;
            document.getElementById("walletAddress").innerText = `Connected: ${selectedAccount}`;
            console.log("Selected Account:", selectedAccount);
        }
    </script>

    <div class="container">
        <h1>Voting DApp</h1>
            
        <div id = "controllerActions">
            <h2>Controller Actions</h2>
                <h4>Add Candidate</h4>
                <input type="text" id="candidateName" placeholder="Candidate Name">
                <button id="addCandidateBtn" >Add Candidate</button>
                <span class="controller-only"></span>
        </div>

        <div class="action-group">
                <h4>Remove Candidate</h4>
                <input type="number" id="removeCandidateId" placeholder="Candidate ID">
                <button id="removeCandidateBtn" >Remove Candidate</button>
                <span class="controller-only"></span>
        </div>
                
        <div class="action-group">
                <h4>Change Controller</h4>
                <input type="text" id="newControllerAddress" placeholder="New Controller Address">
                <button id="changeControllerBtn" >Change Controller</button>
                <span class="controller-only"></span>
        </div>

        <div>
            <h3>Vote for a Candidate</h3>
            <input type="number" id="candidateIdToVote" placeholder="Candidate ID">
            <button id="voteBtn">Vote</button>
        </div> 

        <div id="candidateList">
            <h2>Candidates</h2>
            <ul id="candidates"></ul>
        </div>
    </div>

   

    <script type="module" src="./app.js"></script>
    <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.6.9/ethers.umd.min.js"></script>

</body>
</body>

</html>
Voting-